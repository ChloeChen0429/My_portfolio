# Emotion-Driven Techno Generator 
# Required External Files

To run the full system, several external assets must be placed inside your project folder.  
**All paths below are examples — replace them with your own local paths.**

---

## 1.Emotion Recognition Model (YOLO)

Download the emotion model:

https://drive.google.com/file/d/1h80d8b4QGRUKVzg1dIFC0GF3RnOiyaKB/view?usp=sharing

Place it anywhere you like. Example:

YOUR_PROJECT_FOLDER/models/club_trainaug_best_20251005-203557.pt

Then update the script:

MODEL_PATH = "YOUR_PATH/models/club_trainaug_best_20251005-203557.pt"

## 2.Berlin Underground Loop Dataset

Download:

https://drive.google.com/file/d/1NGyXnNNYFfLn7rlteLllz9XGEUbCVEw8/view?usp=sharing

Unzip the folder anywhere on your system.

Example:

YOUR_PROJECT_FOLDER/data/Berlin_underground/

The script will search these locations:

CANDIDATE_AUDIO_ROOTS = [
    ENV_AUDIO_DIR,
    "YOUR_PATH/Berlin_underground",
]

(Optional) You can also set an environment variable:
export TECHNO_AUDIO_DIR="YOUR_PATH/Berlin_underground" 

## 3.Techno Learn Structure CSV (Required)

The audio engine uses structural metadata from:

-[techno_learn_final_fixed.csv](techno_learn_final_fixed.csv)

Place it anywhere you like. Example:

YOUR_PROJECT_FOLDER/data/techno_learn_final_fixed.csv

Update the code:

STRUCT_CSV = "YOUR_PATH/data/techno_learn_final_fixed.csv"

Required CSV columns:

energy, levels, section

## 4.Loop Metadata CSV

Optional manual file:

-[loop_meta_v3_tonal_only.csv](loop_meta_v3_tonal_only.csv)

If provided, the system loads it directly.

Automatically generated file (no need to prepare):

loop_meta_v2_autogen.csv

This file is auto-generated by the script if no manual metadata CSV exists.
Contains detected loop type, estimated key, and energy features.

### Summary of Required Files

YOUR_PROJECT_FOLDER/
│
├── models/
│     └── club_trainaug_best_20251005-203557.pt
│
├── data/
│     ├── Berlin_underground/      ← Main loop library
│     ├── techno_learn_final_fixed.csv
│     └── loop_meta_v3_tonal_only.csv (optional)
│
└── (auto-generated)
      loop_meta_v2_autogen.csv

# Loop Metadata CSV

The system sends real-time emotion and switch-index data to TouchDesigner through OSC.

## 1. Open the TouchDesigner project

Download 7 emotion videos:

https://drive.google.com/file/d/1CFn1t4jjZCMmz_JdJHDDxkH_jJEAOb9X/view?usp=sharing

Or you can replace it with any video you prefer.

Open:

-[vj毕设.2.toe](vj毕设.2.toe)

Inside the file you will find an OSC In DAT or OSC In CHOP preset to receive signals.

Inside the file you will find an OSC In DAT preset to receive signals.

## 2. Run the OSC Python script

Run:

-[techno_local_emotion_modify_osc.py](techno_local_emotion_modify_osc.py)

Once running, you will see numbers updating inside the OSC In DAT in TouchDesigner.
These correspond to the detected emotion categories:

Emotion	Index

sad	        0

disgust	    1

neutral	    2

angry	    3

surprised	4

happy	    5

fear	    6

OSC messages:

/vj_switch         → integer label (0–6)

## 3. Default OSC Settings

**Python → TouchDesigner:**

TD_IP   = "127.0.0.1"

TD_PORT = 6666

TouchDesigner Settings


**In the OSC In DAT / CHOP:**

Network Address: 127.0.0.1

Port: 6666

## 4. Changing the OSC Port

If you want to use a different port:

**Step 1 — Modify Python**

TD_PORT = 7000

**Step 2 — Modify TouchDesigner**

In OSC In DAT / CHOP → set Port to: 7000

Both sides must match.


